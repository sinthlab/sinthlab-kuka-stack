apple_pluck_impedance_control:
  ros__parameters:
    # Control timing
    update_rate: 200  # control rate for impedance node [Hz]

    # Wrench topic to subscribe to (relative to node namespace)
    wrench_topic: "force_torque_broadcaster/wrench"

    # Start gating
    start_on_done_topic: true
    done_topic: "move_to_start/done"

    # Pull-force stop (EE frame, Z-axis)
    pull_force_threshold: 80.0     # [N] abs(Z) in EE frame

    # Debug logging for threshold tuning
    debug_log_enabled: true
    debug_log_rate_hz: 2.0

move_to_start:
  ros__parameters:
    # Control timing for move-to-start
    update_rate: 100

    # Wait for the correct controller to be active on the server before moving
    wait_for_controller_activation: true
    command_controller_name: "lbr_joint_position_command_controller"

    # Move-to-start settings
    use_initial_joint_position: true
    # Start position in radians (equivalent to [0, 10deg, 0, -80deg, 0, 90deg, 0])
    initial_joint_position: [0.0, 0.1745329252, 0.0, -1.3962634016, 0.0, 1.5707963268, 0.0]
    joint_move_tolerance: 0.01  # [rad]

    # Motion limits (scalar applies to all 7 joints; or provide a 7-element array)
    # iiwa7 per-joint max velocities from URDF (deg/s) converted to rad/s:
    # [98, 98, 100, 130, 140, 180, 180] * pi/180
    move_to_start_v_max: [
      1.7104226669544429,
      1.7104226669544429,
      1.7453292519943295,
      2.2689280275926285,
      2.4434609527920612,
      3.1415926535897931,
      3.1415926535897931
    ]  # [rad/s]
    # Acceleration limits are not in the URDF; use MoveIt defaults (10 rad/s^2)
    move_to_start_a_max: 10.0   # [rad/s^2] (scalar applied to all joints)
    # Jerk is not specified upstream; keep a conservative default
    move_to_start_j_max: 10.0   # [rad/s^3]
